<div>
  <div>
    <h1>
      List of all bets
    </h1>
  </div>
</div>

<hr>

<div>
  <div>
    <h2>Add a new bet</h2>

<% if params[:query_sport_id].blank? %>
<form action="/insert_bet1" method="post">
      <div>
        <label for="sportsbook_id">Sportsbook</label>
        <select id="sportsbook_id" name="query_sportsbook_id">
          <option value="">Select an existing sportsbook</option>
          <% Sportsbook.all.each do |sportsbook| %>
            <option value="<%= sportsbook.id %>"><%= sportsbook.name %></option>
          <% end %>
        </select>
        <p>... or click <a href="/sportsbooks">here</a> to create a new one</p>
      </div>

      <div>
        <label for="sport_id">Sport</label>
        <select id="sport_id" name="query_sport_id">
          <option value="">Select an existing sport</option>
          <% Sport.all.each do |sport| %>
            <option value="<%= sport.id %>"><%= sport.name %></option>
          <% end %>
        </select>
        <p>... or click <a href="/sports">here</a> to create a new one</p>
      </div>
      <button>
        Next
      </button>
      </form>

      <% else %>
      <div>Sportsbook: <%= Sportsbook.find(params[:query_sportsbook_id]).name %></div>
      <div>Sport: <%= Sport.find(params[:query_sport_id]).name %></div>
      <form action="/insert_bet2" method="post">

        <input type="hidden" name="query_sportsbook_id" value="<%= params[:query_sportsbook_id] %>">
        <input type="hidden" name="query_sport_id" value="<%= params[:query_sport_id] %>">
        
        <div>
        <label for="event_id">Event</label>
        <select id="event_id" name="query_event_id">
          <option value="">Select an existing event</option>
          <% Event.where(sport_id: params[:query_sport_id]).each do |event| %>
            <option value="<%= event.id %>"><%= event.name %></option>
          <% end %>
        </select>
        <p>... or click <a href="/events">here</a> to create a new one</p>
      </div>

      <div>
        <label for="name_box">Name</label>
        <input type="text" id="name_box" name="query_name">
      </div>

      <div>
        <label for="odds_box">
          Odds
        </label>
        <input type="text" id="odds_box" name="query_odds">
      </div>

      <div>
        <label for="stake_box">
          Stake
        </label>
        <input type="text" id="stake_box" name="query_stake">
      </div>

      <div>
        <label for="status_box">
          Status
        </label>

        <input type="text" id="status_box" name="query_status">
      </div>

      <button>
        Create bet
      </button>
    </form>
    <% end %>
  </div>
</div>

<hr>
<div>
  <div>
    <table border="1">
      <tr>
        <th>
          ID
        </th>

        <th>
          Name
        </th>

        <th>
          Event
        </th>

        <th>
          Sportsbook
        </th>

        <th>
          Odds
        </th>

        <th>
          Status
        </th>

        <th>
          Created at
        </th>

        <th>
          Updated at
        </th>

        <th>
        </th>
      </tr>

      <% @list_of_bets.each do |a_bet| %>
      <tr>
        <td>
          <%= a_bet.id %>
        </td>

        <td>
          <%= a_bet.name %>
        </td>

        <td>
          <%= a_bet.event_id %>
        </td>

        <td>
          <%= a_bet.sportsbook %>
        </td>

        <td>
          <%= a_bet.odds %>
        </td>

        <td>
          <%= a_bet.status %>
        </td>

        <td>
          <%= time_ago_in_words(a_bet.created_at) %> ago
        </td>
        <td>
          <%= time_ago_in_words(a_bet.updated_at) %> ago
        </td>

        <td>
          <a href="/bets/<%= a_bet.id %>">
            Show details
          </a>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>

<hr>
